/**
 * Yii validation module.
 *
 * This JavaScript module provides the validation methods for the built-in validators.
 *
 * @link http://www.yiiframework.com/
 * @copyright Copyright (c) 2008 Yii Software LLC
 * @license http://www.yiiframework.com/license/
 * @author Qiang Xue <qiang.xue@gmail.com>
 * @since 2.0
 */
yii.validation=function(e){var a={isEmpty:function(e){return null==e||e==[]||""===e},addMessage:function(e,a,t){e.push(a.replace(/\{value\}/g,t))},required:function(t,i,n){var s=!1;if(void 0===n.requiredValue){var r="string"==typeof t||t instanceof String;(n.strict&&void 0!==t||!n.strict&&!a.isEmpty(r?e.trim(t):t))&&(s=!0)}else(!n.strict&&t==n.requiredValue||n.strict&&t===n.requiredValue)&&(s=!0);s||a.addMessage(i,n.message,t)},boolean:function(e,t,i){i.skipOnEmpty&&a.isEmpty(e)||(!i.strict&&(e==i.trueValue||e==i.falseValue)||i.strict&&(e===i.trueValue||e===i.falseValue)||a.addMessage(t,i.message,e))},string:function(e,t,i){i.skipOnEmpty&&a.isEmpty(e)||("string"==typeof e?(void 0!==i.min&&e.length<i.min&&a.addMessage(t,i.tooShort,e),void 0!==i.max&&e.length>i.max&&a.addMessage(t,i.tooLong,e),void 0!==i.is&&e.length!=i.is&&a.addMessage(t,i.notEqual,e)):a.addMessage(t,i.message,e))},file:function(a,n,s){var r=t(a,n,s);e.each(r,(function(e,a){i(a,n,s)}))},image:function(a,n,s,r){var o=t(a,n,s);e.each(o,(function(a,t){if(i(t,n,s),"undefined"!=typeof FileReader){var o=e.Deferred(),m=new FileReader,l=new Image;l.onload=function(){s.minWidth&&this.width<s.minWidth&&n.push(s.underWidth.replace(/\{file\}/g,t.name)),s.maxWidth&&this.width>s.maxWidth&&n.push(s.overWidth.replace(/\{file\}/g,t.name)),s.minHeight&&this.height<s.minHeight&&n.push(s.underHeight.replace(/\{file\}/g,t.name)),s.maxHeight&&this.height>s.maxHeight&&n.push(s.overHeight.replace(/\{file\}/g,t.name)),o.resolve()},l.onerror=function(){n.push(s.notImage.replace(/\{file\}/g,t.name)),o.resolve()},m.onload=function(){l.src=m.result},m.onerror=function(){o.resolve()},m.readAsDataURL(t),r.push(o)}}))},number:function(e,t,i){i.skipOnEmpty&&a.isEmpty(e)||("string"!=typeof e||e.match(i.pattern)?(void 0!==i.min&&e<i.min&&a.addMessage(t,i.tooSmall,e),void 0!==i.max&&e>i.max&&a.addMessage(t,i.tooBig,e)):a.addMessage(t,i.message,e))},range:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t))if(n.allowArray||!e.isArray(t)){var s=!0;e.each(e.isArray(t)?t:[t],(function(a,t){return-1!=e.inArray(t,n.range)||(s=!1,!1)})),n.not===s&&a.addMessage(i,n.message,t)}else a.addMessage(i,n.message,t)},regularExpression:function(e,t,i){i.skipOnEmpty&&a.isEmpty(e)||(!i.not&&!e.match(i.pattern)||i.not&&e.match(i.pattern))&&a.addMessage(t,i.message,e)},email:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){var n=!0;if(i.enableIDN){var s=/^(.*<?)(.*)@(.*)(>?)$/.exec(e);null===s?n=!1:e=s[1]+punycode.toASCII(s[2])+"@"+punycode.toASCII(s[3])+s[4]}n&&(e.match(i.pattern)||i.allowName&&e.match(i.fullPattern))||a.addMessage(t,i.message,e)}},url:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){i.defaultScheme&&!e.match(/:\/\//)&&(e=i.defaultScheme+"://"+e);var n=!0;if(i.enableIDN){var s=/^([^:]+):\/\/([^\/]+)(.*)$/.exec(e);null===s?n=!1:e=s[1]+"://"+punycode.toASCII(s[2])+s[3]}n&&e.match(i.pattern)||a.addMessage(t,i.message,e)}},trim:function(t,i,n){var s=t.find(i.input),r=s.val();return n.skipOnEmpty&&a.isEmpty(r)||(r=e.trim(r),s.val(r)),r},captcha:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t)){var s=e("body").data(n.hashKey);s=null==s?n.hash:s[n.caseSensitive?0:1];for(var r=n.caseSensitive?t:t.toLowerCase(),o=r.length-1,m=0;o>=0;--o)m+=r.charCodeAt(o);m!=s&&a.addMessage(i,n.message,t)}},compare:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t)){var s,r=!0;switch(s=void 0===n.compareAttribute?n.compareValue:e("#"+n.compareAttribute).val(),"number"===n.type&&(t=parseFloat(t),s=parseFloat(s)),n.operator){case"==":r=t==s;break;case"===":r=t===s;break;case"!=":r=t!=s;break;case"!==":r=t!==s;break;case">":r=t>s;break;case">=":r=t>=s;break;case"<":r=t<s;break;case"<=":r=t<=s;break;default:r=!1}r||a.addMessage(i,n.message,t)}}};function t(a,t,i){if("undefined"==typeof File)return[];var n=e(a.input).get(0).files;return n?0===n.length?(i.skipOnEmpty||t.push(i.uploadRequired),[]):i.maxFiles&&i.maxFiles<n.length?(t.push(i.tooMany),[]):n:(t.push(i.message),[])}function i(e,a,t){var i,n;t.extensions&&t.extensions.length>0&&(n=~(i=e.name.lastIndexOf("."))?e.name.substr(i+1,e.name.length).toLowerCase():"",~t.extensions.indexOf(n)||a.push(t.wrongExtension.replace(/\{file\}/g,e.name)));t.mimeTypes&&t.mimeTypes.length>0&&(~t.mimeTypes.indexOf(e.type)||a.push(t.wrongMimeType.replace(/\{file\}/g,e.name))),t.maxSize&&t.maxSize<e.size&&a.push(t.tooBig.replace(/\{file\}/g,e.name)),t.minSize&&t.minSize>e.size&&a.push(t.tooSmall.replace(/\{file\}/g,e.name))}return a}(jQuery);